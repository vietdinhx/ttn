var InputIconSelector=api.InputIconSelector=extendReactClass('MixinInput',{getDefaultProps:function(){return{getIconList:api.urls.ajaxBase+'&action=getFontAwesomeIcons'};},getInitialState:function(){return{value:this.props.value,icons:{},group:{},selectedGroup:'',searchKeyword:''};},componentWillMount:function(){api.__parent__();api.Ajax.request(this.props.getIconList,function(req){var response=req.responseJSON;if(response.type=='success'){var icons={},group={};for(var g in response.data){for(var i in response.data[g]){icons[i]=response.data[g][i];group[g]=group[g]||[];group[g].push(i);}}this.setState({icons:icons,group:group});}else{alert(response.data);}}.bind(this));},render:function(){return this.renderPopupInput();},initActions:function(){api.__parent__();if(this.modal&&this.modal.refs.mountedDOMNode.style.display=='block'){this.modal.setState({content:this.renderModal()});}},popupForm:function(title){this.last_value=this.last_value||JSON.parse(JSON.stringify(this.state.value));this.modal=api.Modal.get({id:'icon_selector_modal',type:'html',width:'90%',height:'90%',title:'icon-selector',content:this.renderModal(),buttons:[{text:'ok',onClick:function(){this.change(this.props.setting,this.state.value);delete this.last_value;setTimeout(this.modal.close.bind(this),100);}.bind(this),className:'btn btn-primary'},{text:'cancel',onClick:function(){this.setState({value:this.last_value});setTimeout(this.modal.close.bind(this),100);}.bind(this),className:'btn btn-default'}]});},renderModal:function(){return[React.createElement('div',{className:'form-inline d-flex justify-content-between mb-3'},React.createElement('div',{className:'form-group'},React.createElement('select',{name:'selectedGroup',onChange:this.filterIcons,className:'form-control'},React.createElement('option',{value:''},api.Text.parse('all-icons')),Object.keys(this.state.group).map(category=>{return React.createElement('option',{value:category,selected:this.state.selectedGroup==category},api.Text.parse(category));}))),React.createElement('div',{className:'form-group'},React.createElement('input',{name:'searchKeyword',value:this.state.searchKeyword,onChange:this.filterIcons,className:'form-control',placeholder:api.Text.parse('search-for')}))),React.createElement('div',{className:'icons-container d-flex flex-wrap'},Object.keys(this.state.icons).map(icon=>{var visible=this.state.selectedGroup?this.state.group[this.state.selectedGroup].indexOf(icon)>-1:true;if(visible&&this.state.searchKeyword){visible=icon.indexOf(this.state.searchKeyword.toLowerCase())>-1;}return React.createElement('a',{href:'javascript:void(0)',title:this.state.icons[icon],className:'thumbnail d-flex justify-content-center align-items-center'+(visible?'':' hidden')+(icon==this.state.value?' selected':''),onClick:function(){this.setState({value:icon});}.bind(this)},React.createElement('i',{className:'fa '+icon}));}))];},filterIcons:function(event){var state={};if(event.target.nodeName=='SELECT'){state[event.target.name]=event.target.options[event.target.selectedIndex].value;}else{state[event.target.name]=event.target.value;}this.setState(state);}});