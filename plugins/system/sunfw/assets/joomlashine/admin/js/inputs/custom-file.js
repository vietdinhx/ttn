var InputCustomFile=api.InputCustomFile=extendReactClass('MixinInput',{getInitialState:function(){return{value:!this.props.value||this.props.value==''?this.props.control['default']:this.props.value,error:''};},render:function(){var items=[],self=this,rootFolder='',list=[],rand=api.Text.randomString(),rootURL=document.getElementById('jsn-tpl-root').value,extensionID=document.getElementById('jsn-extension-id').value;if(this.props.control.rootFolder&&this.props.control.rootFolder!=''){rootFolder=this.props.control.rootFolder+'/';}if(this.state.value!=''){items=this.state.value.split("\n");if(items.length){for(var i=0;i<items.length;i++){var editingURL='',isValidURL=this.isValidURL(items[i]);if(!isValidURL&&typeof Base64!='undefined'){editingURL=rootURL+'administrator/index.php?option=com_templates&view=template&id='+extensionID+'&file='+encodeURIComponent(Base64.encode(rootFolder+items[i]));}var itemHtml=React.createElement('li',{className:'list-group-item',title:items[i]},React.createElement('span',{className:'list-group-item__title'},items[i]),React.createElement('span',{className:'list-group-item__toolbar'},!isValidURL?React.createElement('a',{href:editingURL,target:'_blank'},React.createElement('i',{className:'fa fa-pencil'})):null,items[i]!='custom/custom.css'?React.createElement('a',{href:'#',id:i,onClick:this.deleteCustomFile.bind(this,i)},React.createElement('i',{className:'fa fa-trash'})):null));list.push(itemHtml);}}}return React.createElement('div',{key:(this.props.id||api.Text.toId())+'_input',className:this.props.control.className||''},React.createElement('div',{className:'form-group'},React.createElement('label',{htmlFor:this.props.id},this.label,this.tooltip,this.popover),React.createElement('textarea',{ref:'control',rows:this.props.control.rows?this.props.control.rows:10,cols:this.props.control.cols?this.props.control.cols:'100%',name:this.props.setting,value:this.state.value,onChange:this.change,disabled:this.props.disabled,className:'form-control hidden'},this.state.value)),list.length&&items.length?React.createElement('div',{className:'jsn-custom-file'},React.createElement('ul',{className:'list-group'},list)):null,React.createElement('div',{className:'form-group'},React.createElement('div',{className:'input-group'},React.createElement('input',{type:'text',id:rand,placeholder:api.Text.parse(this.props.control.placeholder),className:'form-control',onKeyDown:function(e){self.addCustomFile(e,rand);}})),this.state.error!=''?React.createElement('p',{className:'mt-1 badge badge-danger'},this.state.error):null));},addCustomFile:function(e,id){var items=[],key=e.which||e.key||e.keyCode||e.charCode;var inputValue=document.getElementById(id).value;if(inputValue!=''&&(key==13||key=='Enter')){if(this.props.control.allowedExtensions&&this.props.control.allowedExtensions.length){if(!this.fileExtensionValidation(inputValue)){return this.setState({error:api.Text.parse(this.props.control.invalidFileFormatMessage)});}}if(this.state.value!=''){items=this.state.value.split("\n");}if(items.indexOf(inputValue)!=-1){return this.setState({error:"The item you have entered is existing"});}items.push(inputValue);this.setState({value:items.join("\n"),error:''});this.props.form.skipSaving=false;this.change(this.props.setting,items.join("\n"));document.getElementById(id).value='';}},deleteCustomFile:function(index){var items=this.state.value.split("\n");items.splice(index,1);this.setState({value:items.join("\n")});this.change(this.props.setting,items.join("\n"));},fileExtensionValidation:function(value){var allowedExtensions=this.props.control.allowedExtensions;return new RegExp('('+allowedExtensions.join('|').replace(/\./g,'\\.')+')$').test(value);},isValidURL:function(value){var pattern=/^(?:\w+:)?\/\/([^\s\.]+\.\S{2}|localhost[\:?\d]*)\S*$/;return pattern.test(value);}});